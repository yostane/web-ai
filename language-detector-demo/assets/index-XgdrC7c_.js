(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();class c{constructor(){this.logElement=document.querySelector("#logs"),this.languageDetector=null}async init(){if("LanguageDetector"in self){const n={sharedContext:"You are master Yoda, a wise and powerful Jedi Master. You are asked to rewrite the following text in a Yoda like manner.",format:"plain-text"},o=await LanguageDetector.availability();if(o==="unavailable"){this.logElement.innerHTML+="Language Detector API is not available.<br>";return}o==="available"?(this.logElement.innerHTML+="Language Detector API is available.<br>",this.languageDetector=await LanguageDetector.create(n)):(this.logElement.innerHTML+="The Language Detector can be used after the model is downloaded.<br>",this.languageDetector=await LanguageDetector.create({...n,monitor(a){a.addEventListener("downloadprogress",e=>{this.logElement&&(this.logElement.innerHTML+=`Downloading ${e.loaded*100}%<br>`)})}}))}}async detectLanguage(n){return this.languageDetector||await this.init(),this.languageDetector.detect(n)}}let r=null;const s=document.querySelector("#submit");s.addEventListener("click",async()=>{r||(r=new c,await r.init());const i=new Map([["fr","ðŸ‡«ðŸ‡·"],["en","ðŸ‡¬ðŸ‡§"],["ja","ðŸ‡¯ðŸ‡µ"]]);for(let n=0;n<3;n++){const o=document.querySelector(`#content${n+1}`).value;if(o){const a=await r.detectLanguage(o),e=a.filter(t=>t.detectedLanguage!="und"&&t.confidence>.1).map(t=>`${i.get(t.detectedLanguage)} (${t.detectedLanguage} - ${t.confidence.toFixed(2)})`).join(", ");document.querySelector(`#content${n+1}-result`).innerText=e,console.log(a)}}});

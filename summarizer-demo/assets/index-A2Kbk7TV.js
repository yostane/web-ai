(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();class c{constructor(){this.logElement=document.querySelector("#logs"),this.summarizer=null}async init(r={}){if(!("Summarizer"in self)){this.log("Summarizer API is not supported in this browser.");return}r.sharedContext="This a blog technical blog post and you are a specialist in summarizing technical content";const o=await Summarizer.availability();if(o==="unavailable"){this.log("Summarizer API is not available.");return}if(o==="available")this.log("Summarizer API is available."),this.summarizer=await Summarizer.create(r);else{const i=this.log;i("Downloading summarizer model."),r.monitor=e=>{e.addEventListener("downloadprogress",t=>{i(`Downloading ${t.loaded*100}%`)})},this.summarizer=await Summarizer.create(r)}}log(r){this.logElement&&(this.logElement.innerHTML+=`${r}<br>`)}async summarize(r,o=!1){if(!this.summarizer)throw new Error("SummarizerHelper is not initialized. Call init() first.");const i={context:"This is a tech blog post"};return o?this.summarizer.summarizeStreaming(r,i):this.summarizer.summarize(r,i)}}function l(...n){const r=document.querySelector("#logs");r&&(r.innerHTML+=`${n.join(" ")}<br>`),console.log(...n)}const m=document.querySelector("#submit");m.addEventListener("click",async()=>{const n=document.querySelector("#type").value,r=document.querySelector("#length").value,o={type:n,length:r},i=new c,e=document.querySelector("#result");e.innerHTML="Loading...",l("Initializing SummarizerHelper with options:",o),await i.init(o);const t=document.querySelector("#message").value,s=document.querySelector("#streaming").checked;try{l("Starting summarization");const a=await i.summarize(t,s);if(s){e.innerHTML="";for await(const u of a)e.append(u)}else e.innerHTML=a;console.log(a),l("Summarization completed successfully.")}catch(a){console.error("Error during summarization:",a),l(`Error: ${a.message}`);return}});
